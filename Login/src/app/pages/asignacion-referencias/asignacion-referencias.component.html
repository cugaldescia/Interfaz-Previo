<div class="flex h-screen">
  <!-- Sidebar -->
<div class="w-64 bg-custom-blue text-white p-4 min-h-screen hidden lg:block">
  <div class="mb-6">
    <img src="assets/Grupo_Escalante_logo.png" alt="Grupo Escalante" class="w-32 h-auto mx-auto filter grayscale" style="filter: brightness(0) invert(1);">
  </div>
  <div class="text-center mb-6">
    <p class="text-lg">{{ usuario }}</p>
    <p class="text-sm">{{ oficina }}</p>
  </div>
  
    
    <ul class="space-y-4">
      <li>
        <a (click)="Referencias()" class="text-lg hover:text-gray-800 hover:bg-white p-2 rounded-md transition">
          Referencias
        </a>
      </li>
     
      <li>
        <a (click)="cerrarSesion()" class="text-lg hover:text-gray-800 hover:bg-white p-2 rounded-md transition">
          Cerrar Sesion
        </a>
      </li>
    </ul>
  </div>
  
  <div class="flex-1 p-6 bg-gray-100">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-semibold text-gray-800">Referencias</h2>
    </div>


    <div class="overflow-x-auto max-h-[450px] overflow-y-auto bg-white rounded-lg shadow-md" *ngIf="userData.data.length > 0">
      <table class="w-full table-auto">
        <thead class="bg-gray-200 sticky top-0 z-10">
          <tr>
            <th class="py-3 px-6 text-left text-gray-700">Referencia</th>
            <th class="py-3 px-6 text-left text-gray-700">Nombre</th>
            <th class="py-3 px-6 text-left text-gray-700">Acciones</th>
            <th class="py-3 px-6 text-left text-gray-700">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let referenciaData of userData.filteredData"
          class="hover:bg-gray-100 cursor-pointer"
          (click)="onReferenciaClick(referenciaData)">

            <td class="py-3 px-6 text-gray-800">{{ referenciaData.referencia }}</td>
            <td class="py-3 px-6 text-gray-800">{{ referenciaData.nombre }}</td>
            <td>
              <button (click)="terminarReferencia(referenciaData)" 
              class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Terminar Referencia</button>
              <td>
                <button (click)="mandarCorreo(referenciaData)" 
                        class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                  No clasificados
                </button>
              </td>
            </tr>
        </tbody>
      </table>
    </div>

    <div class="text-center mt-8" *ngIf="userData.data.length === 0">
      <p class="text-gray-600">No se encontraron referencias.</p>
    </div>
  </div>
  <!-- Spinner de carga -->
<div *ngIf="isLoading" class="fixed inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50">
  <div role="status">
    <svg aria-hidden="true" class="w-8 h-8 mr-2 text-gray-200 animate-spin fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08197 50.5908C9.08197 73.1865 27.4043 91.5089 50 91.5089C72.5957 91.5089 90.918 73.1865 90.918 50.5908C90.918 27.9951 72.5957 9.67273 50 9.67273C27.4043 9.67273 9.08197 27.9951 9.08197 50.5908Z" fill="currentColor"/>
      <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5538C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.723 75.2124 7.41289C69.5422 4.10285 63.2754 1.94025 56.7222 1.05126C51.7666 0.367259 46.7499 0.446843 41.8297 1.27873C39.297 1.6983 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0965 10.1071C47.8511 9.5046 51.7191 9.52673 55.4474 10.1675C60.8784 11.0868 65.9923 13.122 70.3966 16.1496C74.8009 19.1773 78.4036 23.1239 80.9414 27.742C83.1979 31.697 84.803 36.0174 85.7082 40.5409C86.2465 43.0323 89.5422 44.6781 93.9676 39.0409Z" fill="currentFill"/>
    </svg>
    <span class="sr-only">Loading...</span>
  </div>
</div>